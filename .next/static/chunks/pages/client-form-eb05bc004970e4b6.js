(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[175],{3818:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var s=n(8307),r=n(29),i=n(4687),a=n.n(i),o=n(6312),c=n(9332),l=n(7294),d=n(7536),u=n(1604),m=u.z.object({client_type:u.z.number().optional(),target_audience:u.z.number().optional(),recommendations:u.z.array(u.z.string()).optional()}),x=n(5893);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(){var e,t=(0,l.useState)(!1),n=t[0],s=t[1],i=(0,l.useState)(null),u=i[0],p=i[1],h=(0,l.useState)(!1),f=h[0],g=h[1],j=(0,c.useRouter)(),v=(0,d.cI)({resolver:(0,o.F)(m)}),y=v.register,N=v.handleSubmit,w=v.formState.errors,O=(e=(0,r.Z)(a().mark(function e(t){var n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),p(null),n=localStorage.getItem("accountId"),r=b(b({},t),{},{account_id:n?parseInt(n,10):null}),e.next=7,fetch("http://3.133.157.177:8002/api/v1/client/clients/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 7:if((i=e.sent).ok){e.next=13;break}return e.next=11,i.json();case 11:throw Error(e.sent.detail||"Error al guardar la informaci\xf3n");case 13:g(!0),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),p("Error: ".concat(e.t0.message));case 19:return e.prev=19,s(!1),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[0,16,19,22]])})),function(t){return e.apply(this,arguments)});return(0,x.jsxs)("div",{className:"mx-auto mt-10 max-w-xl rounded bg-zinc-900 p-6 text-gray-100 shadow-md",children:[(0,x.jsx)("h1",{className:"mb-4 text-2xl font-bold",children:"Datos de mis clientes"}),u&&(0,x.jsx)("p",{className:"mb-4 text-sm ".concat(u.startsWith("Error")?"text-red-500":"text-green-600"),children:u}),(0,x.jsxs)("form",{onSubmit:N(O),className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Mi tipo de cliente es"}),(0,x.jsxs)("select",b(b({className:"w-full rounded border-none bg-zinc-800 p-2 focus:ring-2 focus:ring-indigo-500"},y("client_type",{valueAsNumber:!0})),{},{children:[(0,x.jsx)("option",{value:"",children:"Seleccionar"}),(0,x.jsx)("option",{value:1,children:"B2B (Vendo a otras empresas)"}),(0,x.jsx)("option",{value:2,children:"B2C (Vendo a otras personas)"}),(0,x.jsx)("option",{value:3,children:"B2B2C (Mi cliente final es a trav\xe9s de otro negocio)"}),(0,x.jsx)("option",{value:4,children:"B2G (Le vendo al gobierno)"})]})),w.client_type&&(0,x.jsx)("p",{className:"text-sm text-red-500",children:w.client_type.message})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"\xbfConozco qui\xe9n es mi p\xfablico objetivo m\xe1s importante?"}),(0,x.jsxs)("select",b(b({className:"w-full rounded border-none bg-zinc-800 p-2 focus:ring-2 focus:ring-indigo-500"},y("target_audience",{valueAsNumber:!0})),{},{children:[(0,x.jsx)("option",{value:"",children:"Seleccionar"}),(0,x.jsx)("option",{value:1,children:"S\xed"}),(0,x.jsx)("option",{value:2,children:"No"}),(0,x.jsx)("option",{value:3,children:"No estoy seguro(a)"})]})),w.target_audience&&(0,x.jsx)("p",{className:"text-sm text-red-500",children:w.target_audience.message})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"mb-2 text-sm font-semibold",children:"Busco recomendaciones o sugerencias mediante:"}),(0,x.jsx)("label",{className:"mb-1 block text-xs font-light text-gray-500",children:"Selecciona todas las que correspondan."}),(0,x.jsx)("div",{className:"space-y-2",children:["Encuestas de satisfacci\xf3n","Entrevistas","Conversaciones casuales","Observar sin interferir","Reviso comentarios en redes sociales","Otros","No es necesario"].map(function(e){return(0,x.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,x.jsx)("input",b(b({type:"checkbox",value:e},y("recommendations")),{},{className:"size-4 rounded border-gray-400 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"})),(0,x.jsx)("span",{className:"text-sm",children:e})]},e)})}),w.recommendations&&(0,x.jsx)("p",{className:"mt-1 text-xs text-red-500",children:w.recommendations.message})]}),(0,x.jsx)("button",{type:"submit",disabled:n,className:"flex items-center justify-center rounded bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 disabled:opacity-50",children:n?"Enviando...":"Finalizar"})]}),f&&(0,x.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,x.jsxs)("div",{className:"w-full max-w-sm rounded bg-white p-6 text-gray-800 shadow-lg",children:[(0,x.jsx)("h3",{className:"mb-2 text-xl font-bold",children:"\xa1Datos Guardados!"}),(0,x.jsx)("p",{className:"mb-4 text-sm",children:"La informaci\xf3n del cliente se guard\xf3 correctamente."}),(0,x.jsx)("button",{onClick:function(){g(!1);var e=localStorage.getItem("accountId");j.push("/summary/?account_id=".concat(e))},className:"rounded bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Finalizar"})]})})]})}},8965:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/client-form",function(){return n(3818)}])}},function(e){e.O(0,[192,332,888,774,179],function(){return e(e.s=8965)}),_N_E=e.O()}]);